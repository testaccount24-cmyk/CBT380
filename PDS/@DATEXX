/*REXX:  @DATE YY/MM/DD | YYDDD   */
/* CONVERTED TO REXX FROM OWN @DATE CLIST 1993/06/07 DAVID MCRITCHIE */
/* @DATE  CREATED 1986/07/09 DAVID MCRITCHIE */
ADDRESS "ISREDIT";"MACRO (XDATE TEST)"
IF XDATE = "" | XDATE = "*" THEN XDATE = "*"
PTIME = TIME()
ADDRESS "TSO" "%SHOWDATE" XDATE "NOWRITE"
CC = RC
IF CC = 0 THEN DO
   ADDRESS "ISPEXEC" "VGET (JDATE,GDATE,SDATE,WDATE)"
   /* IN OS/2 USE  PULL JDATE; PULL GDATE; PULL SDATE; PULL WDATE;*/
   ZEDSMSG = GDATE JDATE WDATE
   IF XDATE  = '*'
      THEN ZEDLMSG = GDATE   JDATE   SDATE  '--  TODAY IS',
             WDATE  SUBSTR(SDATE,3,3) SUBSTR(SDATE,1,2)",",
             "19"||SUBSTR(SDATE,6,2) "AND THE TIME IS" PTIME
      ELSE ZEDLMSG = PTIME "ENTERED AS  @DATE" GDATE  "|",
              JDATE "|" SDATE" -- A" WDATE
   ADDRESS "ISPEXEC" "SETMSG MSG(ISRZ000)"
   IF TEST = "TEST" THEN
      "LINE_BEFORE .ZLAST  = NOTELINE """JDATE,
                  GDATE SDATE WDATE  "-- @DATE" XDATE "--" PTIME""""
   EXIT 0
END
ZEDSMSG = "--ERROR--"
ZEDLMSG = "@DATE" XDATE "  - INVALID ARGUMENT  RC="CC||,
     ", NEED MMDDD OR YYMMDD OR DDMMMYY"
ADDRESS "ISPEXEC" "SETMSG MSG(ISRZ000)"
EXIT CC
