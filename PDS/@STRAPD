00001000 ISREDIT  MACRO (DDNAME DS1)
00010500 /*  TITLE:       @STRAPD -- CREATE A LIST OF DS1( ) NAMES FROM  "LISTAL
00010600 /*  USERS:       SYSTEMS TECHNOLOGY TO UPDATE  CLISTS -- CLIST PANELS L
00010700 /*  ENTRY:       USED AS AN EDIT MACRO
00010800 /*  CONTRIBUTED: 1986/01/29 DAVID MCRITCHIE
00010900 /*  EXAMPLE:  ===> @STRAPD SYSPROC
00011000 /*            ===> @STRAPD ISPPLIB 8
00011200 /**********************************************************************
00011300          SET DDNAME = &SYSCAPS(&STR(&DDNAME))
00011400          IF &STR(&DS1) = &STR() THEN SET DS1 = 1
00020000          SET SYSOUTTRAP = 400
00030000          LISTALC STA
00040000          SET N = &SYSOUTLINE
00041000          SET SYSOUTTRAP = 0
00050000          SET RC = 0   /* FILES TO BE CHECKED LATER RACF/BROWSE */
00050100          SET I = 2
00051000          SET HIT2 = 0
00052000          SET HIT1 = 0
00060000          DO WHILE &I <= &N
00070000             SET X = &STR(&&SYSOUTLINE&I..)
00080000             SET X = &STR(&X.)
00080100             IF &HIT1 = 1 THEN DO
00080200                IF &SUBSTR(1:4,&STR(&X.)    ) ^= &STR(    ) THEN SET HIT
00080500             END
00080600             IF &HIT1 = 0 THEN DO
00080700                IF &SUBSTR(1:2,&STR(&X.)  ) ^= &STR(  ) THEN GOTO NIX
00080800                IF &SUBSTR(1:9,&STR(&X.         )) = &STR(  &STR(&DDNAME
00080900                ELSE GOTO NIX
00081000             END
00090200             SET DX = &STR(&&SYSOUTLINE&EVAL(&I.-1).)
00090300             SET DX = &STR(&DX)
00090600             SET RC = &RC + 1
00090700             SET XDSN&RC = &DX
00090900             SET I = &I. + 1
00091100   NIX: -
00091200             SET I = &I. + 1
00091300          END
00104900 /* ---- HAVE OBTAINED ALL DSNAMES NOW DO CHECKING---------------------
00105000 /* ---- UTILIZING CODE ESSENTIALLY BORROWED FROM THE BROWSE CLIST ----
00105100          SET I = 1
00105200          DO WHILE &I <= &RC.
00105400             SET DSN =  '&STR(&&XDSN&I)'
00105500             SET DS = &DS1 + &I - 1
00105700             IF &I ^= &RC THEN -
00105800                ISREDIT LINE_AFTER .ZLAST = "          DS&DS.(&STR(&DSN.
00105900             ELSE -
00106000                ISREDIT LINE_AFTER .ZLAST = "          DS&DS.(&STR(&DSN.
00109200            SET I = &I + 1
00109300         END
00111500         SET DSN =
00112000         SET XDSN =
00120000 /* ----+++ */
